"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2947],{744:(v,h,n)=>{n.d(h,{M:()=>e});let e=(()=>{class i{}return i.COURSES="courses",i.ORDERS="orders",i.STUDENTS="students",i.TESTS="tests",i.MEDIA="media",i.SCHEDULES="schedules",i.QUESTION_PAPERS="question_papers",i.VALUED_ANSWER_SHEET="valued_answer_sheets",i.ANSWER_SHEET="answer_sheets",i.STUDENT_ACTIVITY="student_activity",i.NOTIFICATIONS="notifications",i})()},4390:(v,h,n)=>{n.r(h),n.d(h,{CoursesPageModule:()=>I});var e=n(6895),i=n(433),d=n(2346),l=n(1619),s=n(8274),a=n(9244),t=n(9763),r=n(6857),o=n(1228);function S(c,g){if(1&c){const u=s.EpF();s.TgZ(0,"ion-item",9),s.NdJ("click",function(){const f=s.CHM(u).$implicit,p=s.oxw();return s.KtG(p.buyCourse(f))}),s.TgZ(1,"ion-label",10)(2,"h2",11),s._uU(3),s.qZA(),s.TgZ(4,"p",12),s._uU(5),s.qZA()()()}if(2&c){const u=g.$implicit;s.xp6(3),s.hij(" ",u.title," "),s.xp6(2),s.hij(" ",u.description," ")}}const R=[{path:"",component:(()=>{class c{constructor(u,_,m,f,p,y){this.dataService=u,this.cd=_,this.alertCtrl=m,this.commonService=f,this.stateService=p,this.authService=y,this.courses=[],this.dataService.getCourses().subscribe(E=>{this.courses=E,this.cd.detectChanges()}),this.dataService.getStudentById(localStorage.getItem("student_id")||"").subscribe(E=>{this.student=E,localStorage.setItem("student",JSON.stringify(this.student)),this.cd.detectChanges()})}ngOnInit(){}openCourse(u){this.stateService.setData("course",u),this.commonService.navigateForward("tests")}buyCourse(u){const _={course_id:u?.id,course_name:u?.title,course_desc:u?.description,student_id:localStorage.getItem("student_id")||this.student.id,student_name:this.student.first_name+" "+this.student.last_name,status:!1};this.dataService.getOrders(_).then(m=>{m?.size>0?this.commonService.navigateForward("payment"):this.dataService.addOrder(_).then(f=>{f.id&&(this.stateService.setData("order_id",f.id),localStorage.setItem("order_id",f.id),this.commonService.navigateForward("payment"))},f=>{console.error("Error while adding the order:::::\n",f),this.commonService.presentToast("Unable to create order","danger")})},m=>{console.error("Error while checking the order:::::\n",m),this.commonService.presentToast("Unable to check order","danger")})}}return c.\u0275fac=function(u){return new(u||c)(s.Y36(a.D),s.Y36(s.sBO),s.Y36(d.Br),s.Y36(t.v),s.Y36(r.b),s.Y36(o.e))},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-courses"]],decls:13,vars:3,consts:[[1,"ion-no-border",3,"translucent"],["color","white"],["slot","start"],["icon","chevron-back-outline","defaultHref","dashboard"],["color","white",3,"fullscreen"],["collapse","condense"],["size","large"],["lines","none","color","white"],["color","white","detail","","class","border-bottom ion-no-padding p-2 pl-3",3,"click",4,"ngFor","ngForOf"],["color","white","detail","",1,"border-bottom","ion-no-padding","p-2","pl-3",3,"click"],[1,"ion-text-wrap"],[1,"fw-semi-bold"],[1,"mt-2"]],template:function(u,_){1&u&&(s.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),s._UZ(3,"ion-back-button",3),s.qZA(),s.TgZ(4,"ion-title"),s._uU(5," Courses "),s.qZA()()(),s.TgZ(6,"ion-content",4)(7,"ion-header",5)(8,"ion-toolbar",1)(9,"ion-title",6),s._uU(10,"Courses"),s.qZA()()(),s.TgZ(11,"ion-list",7),s.YNc(12,S,6,2,"ion-item",8),s.qZA()()),2&u&&(s.Q6J("translucent",!0),s.xp6(6),s.Q6J("fullscreen",!0),s.xp6(6),s.Q6J("ngForOf",_.courses))},dependencies:[e.sg,d.oU,d.Sm,d.W2,d.Gu,d.Ie,d.Q$,d.q_,d.sr,d.wd,d.cs]}),c})()}];let C=(()=>{class c{}return c.\u0275fac=function(u){return new(u||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({imports:[l.Bz.forChild(R),l.Bz]}),c})(),I=(()=>{class c{}return c.\u0275fac=function(u){return new(u||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({imports:[e.ez,i.u5,d.Pc,C]}),c})()},9763:(v,h,n)=>{n.d(h,{v:()=>d});var e=n(8274),i=n(2346);let d=(()=>{class l{constructor(a,t){this.toastCtrl=a,this.navCtrl=t}presentToast(a="Please wait...",t="primary",r=3e3){this.toastCtrl.create({cssClass:"",color:t,duration:r,message:a}).then(o=>{o.present()},o=>{console.error("Error while toasting message",o)})}isValidData(a){return null!=a&&""!==a&&a!==[]&&0!==Object.keys(a).length}getExtension(a){let t=a.split(/[#?]/)[0].split(".").pop().trim();return["jpg","jpeg","png","gif","tiff","svg"].includes(t.toLowerCase())?t="image":["mp3","m4a","acc","ogg","wma","flac","alac"].includes(t.toLowerCase())?t="audio":["3gp","mp4","mov","wmv","flv","avi","avchd","webm","mkv"].includes(t.toLowerCase())?t="video":["zip","rar"].includes(t.toLowerCase())&&(t="archive"),t.toLowerCase()}navigateForward(a,t={}){this.navCtrl.navigateForward(a,{state:{...t}})}navigateBack(a,t={}){this.navCtrl.navigateBack(a,{state:{...t}})}navigateRoot(a,t={}){this.navCtrl.setDirection("root"),this.navCtrl.navigateRoot(a,{state:{...t}})}}return l.\u0275fac=function(a){return new(a||l)(e.LFG(i.yF),e.LFG(i.SH))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9244:(v,h,n)=>{n.d(h,{D:()=>l});var e=n(3725),i=n(744),d=n(8274);let l=(()=>{class s{constructor(t){this.firestore=t}get(t){const r=(0,e.hJ)(this.firestore,t),o=(0,e.IO)(r,(0,e.Xo)("created_at","asc"));return(0,e.BS)(o,{idField:"id"})}getById(t,r){const o=(0,e.JU)(this.firestore,t+`/${r}`);return(0,e._1)(o,{idField:"id"})}getByUID(t,r){console.log(t,r);const o=(0,e.hJ)(this.firestore,t),S=(0,e.IO)(o,(0,e.ar)("uid","==",r),(0,e.Xo)("created_at","asc"));return(0,e.BS)(S,{idField:"id"})}add(t,r){const o=(0,e.hJ)(this.firestore,t);return(0,e.ET)(o,{...r,created_at:(0,e.Bt)()})}delete(t,r){const o=(0,e.JU)(this.firestore,t+`/${r.id}`);return t===i.M.MEDIA||t===i.M.MEDIA?(0,e.r7)(o,{media:(0,e.Ab)(r?.media),updated_at:(0,e.Bt)()}):(0,e.oe)(o)}update(t,r){const o=(0,e.JU)(this.firestore,t+`/${r.id}`);return(0,e.r7)(o,t===i.M.MEDIA||t===i.M.MEDIA?{media:(0,e.vr)(...r?.media),updated_at:(0,e.Bt)()}:{...r,updated_at:(0,e.Bt)()})}getCourses(){const t=(0,e.hJ)(this.firestore,"courses");return(0,e.BS)(t,{idField:"id"})}getCourseById(t){const r=(0,e.JU)(this.firestore,`courses/${t}`);return(0,e._1)(r,{idField:"id"})}getTests(t){const r=(0,e.hJ)(this.firestore,"tests"),o=(0,e.IO)(r,(0,e.ar)("course_id","==",t||""));return(0,e.BS)(o,{idField:"id"})}getTestById(t){const r=(0,e.JU)(this.firestore,`tests/${t}`);return(0,e._1)(r,{idField:"id"})}getValuedAnswerSheetByTestId(t,r){const o=(0,e.hJ)(this.firestore,i.M.VALUED_ANSWER_SHEET),S=(0,e.IO)(o,(0,e.ar)("test_id","==",t||""),(0,e.ar)("student_id","==",r||""));return(0,e.BS)(S,{idField:"id"})}getRemarksByTestId(t,r){const o=(0,e.hJ)(this.firestore,i.M.STUDENT_ACTIVITY),S=(0,e.IO)(o,(0,e.ar)("test_id","==",t||""),(0,e.ar)("student_id","==",r||""));return(0,e.BS)(S,{idField:"id"})}getAnswerSheetByTestId(t){const r=(0,e.hJ)(this.firestore,i.M.ANSWER_SHEET),o=(0,e.IO)(r,(0,e.ar)("test_id","==",t||""));return(0,e.BS)(o,{idField:"id"})}getScheduleByCourseId(t){const r=(0,e.hJ)(this.firestore,i.M.SCHEDULES),o=(0,e.IO)(r,(0,e.ar)("course_id","==",t));return(0,e.BS)(o,{idField:"id"})}getScheduleByTestId(t){const r=(0,e.hJ)(this.firestore,i.M.SCHEDULES),o=(0,e.IO)(r,(0,e.ar)("test_id","==",t||""));return(0,e.BS)(o,{idField:"id"})}getQuestionPaperByTestId(t){const r=(0,e.hJ)(this.firestore,i.M.QUESTION_PAPERS),o=(0,e.IO)(r,(0,e.ar)("test_id","==",t||""));return(0,e.BS)(o,{idField:"id"})}updateTest(t){const r=(0,e.JU)(this.firestore,`tests/${t.id}`);return(0,e.r7)(r,{...t,updated_at:(0,e.Bt)()})}getOrdersList(){const t=(0,e.hJ)(this.firestore,"orders"),r=(0,e.IO)(t,(0,e.ar)("student_id","==",localStorage.getItem("uid")||""));return(0,e.BS)(r,{idField:"id"})}getPurchasedOrders(){const t=(0,e.hJ)(this.firestore,"orders"),r=(0,e.IO)(t,(0,e.ar)("student_id","==",localStorage.getItem("student_id")||""),(0,e.ar)("status","==",!0));return(0,e.BS)(r,{idField:"id"})}getOrders(t){const r=(0,e.hJ)(this.firestore,"orders"),o=(0,e.IO)(r,(0,e.ar)("course_id","==",t.course_id||""),(0,e.ar)("student_id","==",t.student_id||""));return(0,e.PL)(o)}addOrder(t){const r=(0,e.hJ)(this.firestore,"orders");return(0,e.ET)(r,{...t,created_at:(0,e.Bt)()})}updateOrder(t){const r=(0,e.JU)(this.firestore,`orders/${t.id}`);return(0,e.r7)(r,{...t,updated_at:(0,e.Bt)()})}getStudentById(t){const r=(0,e.JU)(this.firestore,`students/${t}`);return(0,e._1)(r,{idField:"id"})}getStudent(t){const r=(0,e.hJ)(this.firestore,"students"),o=(0,e.IO)(r,(0,e.ar)("email","==",t.email||""),(0,e.ar)("password","==",t.password||""));return(0,e.BS)(o,{idField:"id"})}checkStudent(t){const r=(0,e.hJ)(this.firestore,i.M.STUDENTS),o=(0,e.IO)(r,(0,e.ar)("email","==",t));return(0,e.BS)(o,{idField:"id"})}addStudent(t){const r=(0,e.hJ)(this.firestore,"students");return(0,e.ET)(r,{...t,created_at:(0,e.Bt)()})}deleteStudent(t){const r=(0,e.JU)(this.firestore,`students/${t.id}`);return(0,e.oe)(r)}updateStudent(t){const r=(0,e.JU)(this.firestore,`students/${t.id}`);return(0,e.r7)(r,{...t,updated_at:(0,e.Bt)()})}}return s.\u0275fac=function(t){return new(t||s)(d.LFG(e.gg))},s.\u0275prov=d.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},6857:(v,h,n)=>{n.d(h,{b:()=>i});var e=n(8274);let i=(()=>{class d{constructor(){this._data={}}getData(s){return this._data[s]}setData(s,a){this._data[s]=a}}return d.\u0275fac=function(s){return new(s||d)},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);